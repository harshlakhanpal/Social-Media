(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,n){e.exports=n.p+"static/media/delete.68ee63aa.svg"},41:function(e,t,n){e.exports=n.p+"static/media/Add.d28f9fce.svg"},51:function(e,t,n){e.exports=n.p+"static/media/loader.8ab7e767.gif"},52:function(e,t,n){e.exports=n.p+"static/media/view-arrow.eccd1885.svg"},53:function(e,t,n){e.exports=n.p+"static/media/right-arrow.5d1abd5e.svg"},58:function(e,t,n){e.exports=n.p+"static/media/heart.0a029a20.svg"},59:function(e,t,n){e.exports=n.p+"static/media/heart-filled.3c2916f3.svg"},61:function(e,t,n){e.exports=n.p+"static/media/logout.e797dbae.svg"},62:function(e,t,n){e.exports=n(77)},71:function(e,t,n){},72:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),o=n.n(c),l=n(21),s=n(28),i=n(12),u=n(16),m=n(19),d=n(26),p=n(47),b=n(30),g={drawerVisibility:!1,user:{}},f=[p.a],E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,h=Object(d.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"TOGGLE_DRAWER":return Object(b.a)(Object(b.a)({},e),{},{drawerVisibility:!e.drawerVisibility});case"LOGIN":return Object(b.a)(Object(b.a)({},e),{},{user:a});case"LOGOUT":return localStorage.clear(),Object(b.a)({},e);default:return e}}}),O=Object(d.e)(h,E(d.a.apply(void 0,f))),v=(n(71),n(72),n(7)),j=function(){var e=Object(v.g)();return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}," ",r.a.createElement("h1",{className:"title"},"Welcome"),r.a.createElement("div",{style:{display:"block",marginTop:"1rem"}},r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/login")}},"Login"),r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/register")}},"Sign up")))},y=n(6),k=n(48),w=n.n(k),N=n(14),I=n(20);function x(){var e=Object(I.a)(["\n  mutation(\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      username: $username\n      email: $email\n      password: $password\n      confirmPassword: $confirmPassword\n    ) {\n      username\n      email\n      token\n      id\n      createdAt\n    }\n  }\n"]);return x=function(){return e},e}function S(){var e=Object(I.a)(["\n  mutation($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      username\n      email\n      token\n      id\n    }\n  }\n"]);return S=function(){return e},e}function C(){var e=Object(I.a)(["\n  mutation($postId: ID!) {\n    deletePost(postId: $postId)\n  }\n"]);return C=function(){return e},e}function $(){var e=Object(I.a)(["\n  mutation($postId: ID!) {\n    likePost(postId: $postId) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return $=function(){return e},e}function P(){var e=Object(I.a)(["\n  mutation($postId: ID!, $commentID: ID!) {\n    deleteComment(postId: $postId, commentID: $commentID) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return P=function(){return e},e}function A(){var e=Object(I.a)(["\n  mutation($postId: ID!, $body: String!) {\n    createComment(postId: $postId, body: $body) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return A=function(){return e},e}function D(){var e=Object(I.a)(["\n  mutation($body: String!) {\n    createPost(body: $body) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return D=function(){return e},e}function L(){var e=Object(I.a)(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return L=function(){return e},e}function _(){var e=Object(I.a)(["\n  query {\n    getPosts {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return _=function(){return e},e}var T=Object(l.b)(_()),R=Object(l.b)(L()),z=Object(l.b)(D()),G=Object(l.b)(A()),U=Object(l.b)(P()),V=Object(l.b)($()),B=Object(l.b)(C()),J=Object(l.b)(S()),q=Object(l.b)(x()),F=n(51),W=n.n(F),M=function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:W.a})))},X=function(){var e=Object(v.g)(),t=Object(a.useState)(""),n=Object(y.a)(t,2),c=n[0],o=n[1],l=Object(N.a)(z,{variables:{body:c},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(){e.push("/home")},onError:function(e){console.log("Error",e)}}),s=Object(y.a)(l,2),i=s[0],u=s[1],m=(u.called,u.loading);u.data,u.error;return r.a.createElement("div",{className:"create-post"},m&&r.a.createElement(M,null),r.a.createElement("h1",null,"Share your thoughts with us"),r.a.createElement("textarea",{className:"input",style:{marginBottom:"0"},rows:"5",name:"Body",value:c,onChange:function(e){return o(e.target.value)},placeholder:"Let us know what's on your mind "}),r.a.createElement("button",{className:"btn",onClick:i},"Share"))},H=n(52),K=n.n(H),Q=function(){var e=Object(a.useState)([]),t=Object(y.a)(e,2),n=t[0],c=t[1],o=Object(v.g)(),l=Object(N.b)(T,{fetchPolicy:"no-cache",onCompleted:function(e){console.log(e),c(e.getPosts)}}),s=(l.data,l.loading);return r.a.createElement("section",{className:"home"},s&&r.a.createElement(M,null),n.map((function(e){var t=e.username,n=e.body,a=e.id,c=e.createdAt;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"info"},r.a.createElement("p",{style:{fontSize:"1.65rem",padding:"1.3rem"}},n),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem"}},r.a.createElement("p",null,t),r.a.createElement("p",null,w()(c).fromNow()))),r.a.createElement("div",{className:"action",onClick:function(){return o.push("/home/".concat(a))}},r.a.createElement("img",{src:K.a,alt:"View post",className:"icon"})))})))},Y=function(){var e=Object(v.g)(),t=Object(m.b)(),n=Object(a.useState)(""),c=Object(y.a)(n,2),o=c[0],l=c[1],s=Object(a.useState)(""),i=Object(y.a)(s,2),u=i[0],d=i[1];Object(a.useEffect)((function(){localStorage.getItem("user")&&e.push("/home")}),[]);var p=Object(N.a)(J,{variables:{username:o,password:u},pollInterval:0,onCompleted:function(n){t(function(e){return{type:"LOGIN",payload:e}}(n.login)),localStorage.setItem("token",JSON.stringify(n.login.token)),localStorage.setItem("user",JSON.stringify(n.login)),e.push("/home")}}),b=Object(y.a)(p,2),g=b[0],f=b[1],E=(f.called,f.loading);f.data,f.error;return r.a.createElement("div",{className:"login"},E&&r.a.createElement(M,null),r.a.createElement("h1",null,"Login"),r.a.createElement("input",{className:"input",name:"username",value:o,onChange:function(e){return l(e.target.value)},placeholder:"Enter your username"}),r.a.createElement("input",{className:"input",name:"password",type:"password",value:u,onChange:function(e){return d(e.target.value)},placeholder:"Enter your password"}),r.a.createElement("br",null),r.a.createElement("span",{onClick:function(){return e.push("/register")},className:"link"},"Not a member? Register here."),r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:g},"Login"),r.a.createElement("br",null))},Z=n(54),ee=n(53),te=n.n(ee);function ne(){var e=Object(I.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 30%;\n  height: 100%;\n  background: #4265e2;\n  z-index: 100;\n  div {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n"]);return ne=function(){return e},e}var ae=Z.a.div(ne()),re=function(){var e=Object(v.g)(),t=Object(m.c)((function(e){return e.app.drawerVisibility})),n=Object(m.b)();return console.log(t),r.a.createElement(r.a.Fragment,null,t?r.a.createElement(ae,null,r.a.createElement("div",null,r.a.createElement("span",{style:{width:"100%",textAlign:"center"},onClick:function(){return n({type:"TOGGLE_DRAWER"})}},r.a.createElement("img",{src:te.a,alt:"hide sidebar",className:"icon"})),r.a.createElement("div",{onClick:function(){return e.replace("/home/create_post")}},"Option1"),r.a.createElement("div",null,"Option2"),r.a.createElement("div",null,"Option3"))):null)},ce=n(13),oe=n.n(ce),le=n(24),se=function(){var e=Object(v.g)(),t=Object(a.useState)(""),n=Object(y.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(""),s=Object(y.a)(l,2),i=s[0],u=s[1],m=Object(a.useState)(""),d=Object(y.a)(m,2),p=d[0],b=d[1],g=Object(a.useState)(""),f=Object(y.a)(g,2),E=f[0],h=f[1],O=Object(N.a)(q),j=Object(y.a)(O,2),k=j[0],w=(j[1].loading,function(){var t=Object(le.a)(oe.a.mark((function t(){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{k({variables:{username:c,email:i,password:p,confirmPassword:E}}),e.push("/login")}catch(n){console.log(Object.keys(n),n.message)}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return r.a.createElement("div",{className:"register"},r.a.createElement("h1",null,"Register"),r.a.createElement("input",{className:"input",label:"Username",value:c,onChange:function(e){return o(e.target.value)},placeholder:"Enter your Username"}),r.a.createElement("input",{className:"input",label:"Email",value:i,onChange:function(e){return u(e.target.value)},placeholder:"Enter your Email"}),r.a.createElement("input",{className:"input",type:"password",value:p,label:"Password",onChange:function(e){return b(e.target.value)},placeholder:"Enter your Password"}),r.a.createElement("input",{className:"input",type:"password",name:"confirmPassword",value:E,label:"Confirm Password",onChange:function(e){return h(e.target.value)},placeholder:"Confirm your password"}),r.a.createElement("br",null),r.a.createElement("span",{onClick:function(){return e.push("/login")},className:"link"},"Already a member? Login."),r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:w},"Register"),r.a.createElement("br",null))},ie=n(40),ue=n.n(ie),me=n(58),de=n.n(me),pe=n(59),be=n.n(pe),ge=function(){var e=JSON.parse(localStorage.getItem("user")),t=Object(v.g)(),n=Object(v.i)().postId,c=Object(a.useState)(0),o=Object(y.a)(c,2),l=o[0],s=o[1],i=Object(a.useState)([]),u=Object(y.a)(i,2),m=u[0],d=u[1],p=Object(a.useState)(""),b=Object(y.a)(p,2),g=b[0],f=b[1],E=Object(a.useState)({}),h=Object(y.a)(E,2),O=h[0],j=h[1],k=Object(a.useState)(""),w=Object(y.a)(k,2),I=w[0],x=w[1],S=Object(N.b)(R,{variables:{postId:n},onCompleted:function(){var e=Object(le.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,j(t.getPost);case 3:return e.next=5,d(t.getPost.likes);case 5:return e.next=7,s(t.getPost.likes.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}).loading,C=Object(N.a)(G,{variables:{body:I,postId:n},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(){var e=Object(le.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t.createComment);case 2:return e.next=4,x("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){console.log("Error",e)}}),$=Object(y.a)(C,1)[0],P=Object(N.a)(V,{variables:{postId:n},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(){var e=Object(le.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,s(t.likePost.likes.length);case 3:return e.next=5,d(t.likePost.likes);case 5:j(t.likePost);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){console.log("Error",e)}}),A=Object(y.a)(P,1)[0],D=Object(N.a)(B,{variables:{postId:n},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(e){console.log(e),t.push("/home")},onError:function(e){console.log("Error",e)}}),L=Object(y.a)(D,1)[0],_=Object(N.a)(U,{variables:{postId:n,commentID:g},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(e){j(e.deleteComment)},onError:function(e){console.log("Error",e)}}),T=Object(y.a)(_,1)[0];return console.log(g),r.a.createElement("section",{className:"post-page"},S&&r.a.createElement(M,null),r.a.createElement("div",null,O&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{style:{fontSize:"1.65rem"}},O.body),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"1rem"}},r.a.createElement("p",{style:{textAlign:"end"}},"Posted by ".concat(O.username)),r.a.createElement("p",null,"Liked by ".concat(l,0===l||l>1?" users.":" user.")))),r.a.createElement("div",{className:"actions"},e&&e.username===O.username&&r.a.createElement("span",{onClick:L},r.a.createElement("img",{src:ue.a,alt:"Delete Post",className:"icon"})),r.a.createElement("span",{className:"like",onClick:A},m.some((function(t){return t.username===e.username}))?r.a.createElement("img",{src:be.a,alt:"Like/Unlike Post",className:"icon"}):r.a.createElement("img",{src:de.a,alt:"Like/Unlike Post",className:"icon"})))),r.a.createElement("div",{className:"textarea-container"},r.a.createElement("textarea",{className:"input",style:{marginBottom:"0"},rows:"4",placeholder:"Comment here.",value:I,onChange:function(e){x(e.target.value)}}),r.a.createElement("button",{className:"btn",onClick:$},"Comment")),O.comments&&O.comments.length>0&&O.comments.map((function(t){var n=t.body,a=t.id,c=t.username;return r.a.createElement("div",{className:"comment"},r.a.createElement("span",{style:{wordBreak:"break-all"}},n),e&&e.username===c&&r.a.createElement("span",{style:{alignSelf:"flex-end"},onClick:Object(le.a)(oe.a.mark((function e(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(a);case 2:T();case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{src:ue.a,alt:"Delete comment",className:"icon"})))})))))},fe=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Error 404: Page not found"),r.a.createElement("p",null,"This page isn't available. Try checking the URL or visit a different page."))},Ee=n(60),he=function(e){var t=e.component,n=void 0===t?null:t,a=e.render,c=void 0===a?null:a,o=Object(Ee.a)(e,["component","render"]);return r.a.createElement(v.b,Object.assign({},o,{render:function(e){return localStorage.getItem("token")?c?c(e):n?r.a.createElement(n,e):null:r.a.createElement(v.a,{to:"/login"})}}))},Oe=n(61),ve=n.n(Oe),je=function(){var e=Object(v.g)(),t=Object(m.c)((function(e){return e.app.user})),n=!!(Object.keys(t).length>0||localStorage.getItem("user")),a=Object(m.b)();return r.a.createElement("div",{className:"app-header"},r.a.createElement("h2",null,"Social Media"),n&&r.a.createElement("span",{style:{marginRight:"1rem"},onClick:Object(le.a)(oe.a.mark((function t(){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({type:"LOGOUT"});case 2:e.push("/login");case 3:case"end":return t.stop()}}),t)})))},r.a.createElement("img",{src:ve.a,alt:"logout",className:"icon"})))},ye=n(41),ke=n.n(ye),we=function(){var e=Object(v.g)(),t=Object(v.h)(),n=Object(m.c)((function(e){return e.app.user})),a=!!(Object.keys(n).length>0||localStorage.getItem("user"));return r.a.createElement(r.a.Fragment,null,a?"/home/create_post"!==t.pathname?r.a.createElement("div",{className:"footer",onClick:function(){return e.push("/home/create_post")}},r.a.createElement("img",{src:ke.a,style:{height:"2.4rem",width:"2.4rem"},alt:"New post",className:"icon"})):r.a.createElement("div",{className:"footer"},r.a.createElement("img",{src:ke.a,style:{height:"2.4rem",width:"2.4rem"},alt:"New post",className:"icon"})):null)},Ne=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(je,null),r.a.createElement(re,null),r.a.createElement("div",{className:"content"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",component:j}),r.a.createElement(v.b,{exact:!0,path:"/login",component:Y}),r.a.createElement(v.b,{exact:!0,path:"/register",component:se}),r.a.createElement(he,{exact:!0,path:"/home",component:Q}),r.a.createElement(he,{exact:!0,path:"/home/create_post",component:X}),r.a.createElement(he,{exact:!0,path:"/home/:postId",component:ge}),r.a.createElement(fe,null))),r.a.createElement(we,null))},Ie=new s.a({addTypename:!1}),xe=new l.a({uri:"/graphql",cache:Ie});o.a.render(r.a.createElement(i.a,{client:xe},r.a.createElement(u.a,null,r.a.createElement(m.a,{store:O},r.a.createElement(Ne,null)))),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.4c451dfb.chunk.js.map