(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,n){e.exports=n.p+"static/media/delete.68ee63aa.svg"},43:function(e,t,n){e.exports=n.p+"static/media/Add.d28f9fce.svg"},53:function(e,t,n){e.exports=n.p+"static/media/loader.8ab7e767.gif"},54:function(e,t,n){e.exports=n.p+"static/media/view-arrow.eccd1885.svg"},55:function(e,t,n){e.exports=n.p+"static/media/right-arrow.5d1abd5e.svg"},60:function(e,t,n){e.exports=n.p+"static/media/heart.0a029a20.svg"},61:function(e,t,n){e.exports=n.p+"static/media/heart-filled.3c2916f3.svg"},63:function(e,t,n){e.exports=n.p+"static/media/logout.e797dbae.svg"},64:function(e,t,n){e.exports=n(80)},73:function(e,t,n){},74:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(25),c=n.n(o),s=n(22),l=n(31),i=n(14),u=n(18),m=n(20),d=n(29),p=n(49),b=n(32),g={drawerVisibility:!1,user:{}},f=[p.a],O=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.d,E=Object(d.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"TOGGLE_DRAWER":return Object(b.a)(Object(b.a)({},e),{},{drawerVisibility:!e.drawerVisibility});case"LOGIN":return Object(b.a)(Object(b.a)({},e),{},{user:a});case"LOGOUT":return localStorage.clear(),Object(b.a)({},e);default:return e}}}),h=Object(d.e)(E,O(d.a.apply(void 0,f))),v=(n(73),n(74),n(75),n(8)),j=n(7),y=function(){var e=Object(j.g)();return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}," ",r.a.createElement("h1",{className:"title"},"Welcome"),r.a.createElement("div",{style:{display:"block",marginTop:"1rem"}},r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/login")}},"Login"),r.a.createElement("button",{className:"btn",onClick:function(){return e.push("/register")}},"Sign up")))},k=n(6),C=n(50),w=n.n(C),N=n(16),x=n(21);function I(){var e=Object(x.a)(["\n  mutation(\n    $username: String!\n    $email: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    register(\n      username: $username\n      email: $email\n      password: $password\n      confirmPassword: $confirmPassword\n    ) {\n      username\n      email\n      token\n      id\n      createdAt\n    }\n  }\n"]);return I=function(){return e},e}function S(){var e=Object(x.a)(["\n  mutation($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      username\n      email\n      token\n      id\n    }\n  }\n"]);return S=function(){return e},e}function P(){var e=Object(x.a)(["\n  mutation($postId: ID!) {\n    deletePost(postId: $postId)\n  }\n"]);return P=function(){return e},e}function $(){var e=Object(x.a)(["\n  mutation($postId: ID!) {\n    likePost(postId: $postId) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return $=function(){return e},e}function A(){var e=Object(x.a)(["\n  mutation($postId: ID!, $commentID: ID!) {\n    deleteComment(postId: $postId, commentID: $commentID) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return A=function(){return e},e}function B(){var e=Object(x.a)(["\n  mutation($postId: ID!, $body: String!) {\n    createComment(postId: $postId, body: $body) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return B=function(){return e},e}function D(){var e=Object(x.a)(["\n  mutation($body: String!) {\n    createPost(body: $body) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return D=function(){return e},e}function L(){var e=Object(x.a)(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return L=function(){return e},e}function _(){var e=Object(x.a)(["\n  query {\n    getPosts {\n      username\n      body\n      id\n      createdAt\n      comments {\n        id\n        username\n        body\n        createdAt\n      }\n      likes {\n        username\n        createdAt\n      }\n    }\n  }\n"]);return _=function(){return e},e}var H=Object(s.b)(_()),T=Object(s.b)(L()),R=Object(s.b)(D()),U=Object(s.b)(B()),z=Object(s.b)(A()),G=Object(s.b)($()),V=Object(s.b)(P()),J=Object(s.b)(S()),q=Object(s.b)(I()),F=n(53),W=n.n(F),M=function(){return r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"},r.a.createElement("img",{src:W.a})))},X=function(){var e=Object(j.g)(),t=Object(a.useState)(""),n=Object(k.a)(t,2),o=n[0],c=n[1],s=Object(N.a)(R,{variables:{body:o},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(){e.push("/home"),v.b.success("Post created successfully",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},onError:function(e){console.log(e.graphQLErrors),v.b.error("Something went wrong, Please try again.",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})}}),l=Object(k.a)(s,2),i=l[0],u=l[1],m=(u.called,u.loading);u.data,u.error;return r.a.createElement("div",{className:"create-post"},m&&r.a.createElement(M,null),r.a.createElement("h1",null,"Share your thoughts with us"),r.a.createElement("textarea",{className:"input",style:{marginBottom:"0"},rows:"5",name:"Body",value:o,onChange:function(e){return c(e.target.value)},placeholder:"Let us know what's on your mind "}),r.a.createElement("button",{className:"btn",onClick:i},"Share"))},Q=n(54),Y=n.n(Q),K=function(){var e=Object(a.useState)([]),t=Object(k.a)(e,2),n=t[0],o=t[1],c=Object(j.g)(),s=Object(N.b)(H,{fetchPolicy:"no-cache",onCompleted:function(e){console.log(e),o(e.getPosts)},onError:function(e){v.b.error("Could not fetch posts, Please try again",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})}}),l=(s.data,s.loading);return r.a.createElement("section",{className:"home"},l&&r.a.createElement(M,null),n.map((function(e){var t=e.username,n=e.body,a=e.id,o=e.createdAt;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"info"},r.a.createElement("p",{style:{fontSize:"1.65rem",padding:"1.3rem"}},n),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem"}},r.a.createElement("p",null,t),r.a.createElement("p",null,w()(o).fromNow()))),r.a.createElement("div",{className:"action",onClick:function(){return c.push("/home/".concat(a))}},r.a.createElement("img",{src:Y.a,alt:"View post",className:"icon"})))})))},Z=function(){var e=Object(j.g)(),t=Object(m.b)(),n=Object(a.useState)(""),o=Object(k.a)(n,2),c=o[0],s=o[1],l=Object(a.useState)(""),i=Object(k.a)(l,2),u=i[0],d=i[1];Object(a.useEffect)((function(){localStorage.getItem("user")&&e.push("/home")}),[]);var p=Object(N.a)(J,{variables:{username:c,password:u},pollInterval:0,onCompleted:function(n){t(function(e){return{type:"LOGIN",payload:e}}(n.login)),localStorage.setItem("token",JSON.stringify(n.login.token)),localStorage.setItem("user",JSON.stringify(n.login)),e.push("/home"),v.b.success("You are now logged in}",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})},onError:function(e){console.log(e),v.b.error("Please enter your credentials again.",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})}}),b=Object(k.a)(p,2),g=b[0],f=b[1],O=(f.called,f.loading);f.data,f.error;return r.a.createElement("div",{className:"login"},O&&r.a.createElement(M,null),r.a.createElement("h1",null,"Login"),r.a.createElement("input",{className:"input",name:"username",value:c,onChange:function(e){return s(e.target.value)},placeholder:"Enter your username"}),r.a.createElement("input",{className:"input",name:"password",type:"password",value:u,onChange:function(e){return d(e.target.value)},placeholder:"Enter your password"}),r.a.createElement("br",null),r.a.createElement("span",{onClick:function(){return e.push("/register")},className:"link"},"Not a member? Register here."),r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:g},"Login"),r.a.createElement("br",null))},ee=n(56),te=n(55),ne=n.n(te);function ae(){var e=Object(x.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 30%;\n  height: 100%;\n  background: #4265e2;\n  z-index: 100;\n  div {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  }\n"]);return ae=function(){return e},e}var re=ee.a.div(ae()),oe=function(){var e=Object(j.g)(),t=Object(m.c)((function(e){return e.app.drawerVisibility})),n=Object(m.b)();return console.log(t),r.a.createElement(r.a.Fragment,null,t?r.a.createElement(re,null,r.a.createElement("div",null,r.a.createElement("span",{style:{width:"100%",textAlign:"center"},onClick:function(){return n({type:"TOGGLE_DRAWER"})}},r.a.createElement("img",{src:ne.a,alt:"hide sidebar",className:"icon"})),r.a.createElement("div",{onClick:function(){return e.replace("/home/create_post")}},"Option1"),r.a.createElement("div",null,"Option2"),r.a.createElement("div",null,"Option3"))):null)},ce=n(10),se=n.n(ce),le=n(24),ie=function(){var e=Object(j.g)(),t=Object(a.useState)(""),n=Object(k.a)(t,2),o=n[0],c=n[1],s=Object(a.useState)(""),l=Object(k.a)(s,2),i=l[0],u=l[1],m=Object(a.useState)(""),d=Object(k.a)(m,2),p=d[0],b=d[1],g=Object(a.useState)(""),f=Object(k.a)(g,2),O=f[0],E=f[1],h=Object(N.a)(q),y=Object(k.a)(h,2),C=y[0],w=(y[1].loading,function(){var t=Object(le.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C({variables:{username:o,email:i,password:p,confirmPassword:O},onCompleted:function(){var e=Object(le.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.b.success("User registered successfully",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){v.b.error("User registration failed,Please try again",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})}}),e.push("/login");case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}());return r.a.createElement("div",{className:"register"},r.a.createElement("h1",null,"Register"),r.a.createElement("input",{className:"input",label:"Username",value:o,onChange:function(e){return c(e.target.value)},placeholder:"Enter your Username"}),r.a.createElement("input",{className:"input",label:"Email",value:i,onChange:function(e){return u(e.target.value)},placeholder:"Enter your Email"}),r.a.createElement("input",{className:"input",type:"password",value:p,label:"Password",onChange:function(e){return b(e.target.value)},placeholder:"Enter your Password"}),r.a.createElement("input",{className:"input",type:"password",name:"confirmPassword",value:O,label:"Confirm Password",onChange:function(e){return E(e.target.value)},placeholder:"Confirm your password"}),r.a.createElement("br",null),r.a.createElement("span",{onClick:function(){return e.push("/login")},className:"link"},"Already a member? Login."),r.a.createElement("br",null),r.a.createElement("button",{className:"btn",onClick:w},"Register"),r.a.createElement("br",null))},ue=n(42),me=n.n(ue),de=n(60),pe=n.n(de),be=n(61),ge=n.n(be),fe=function(){var e=JSON.parse(localStorage.getItem("user")),t=Object(j.g)(),n=Object(j.i)().postId,o=Object(a.useState)(0),c=Object(k.a)(o,2),s=c[0],l=c[1],i=Object(a.useState)([]),u=Object(k.a)(i,2),m=u[0],d=u[1],p=Object(a.useState)(""),b=Object(k.a)(p,2),g=b[0],f=b[1],O=Object(a.useState)({}),E=Object(k.a)(O,2),h=E[0],y=E[1],C=Object(a.useState)(""),w=Object(k.a)(C,2),x=w[0],I=w[1],S=Object(N.b)(T,{variables:{postId:n},onCompleted:function(){var e=Object(le.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,y(t.getPost);case 3:return e.next=5,d(t.getPost.likes);case 5:return e.next=7,l(t.getPost.likes.length);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){v.b.error("Could not fetch post, Please try again",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})}}).loading,P=Object(N.a)(U,{variables:{body:x,postId:n},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(){var e=Object(le.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t.createComment);case 2:return e.next=4,I("");case 4:v.b.success("Comment added.",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){v.b.error("Please try again",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1})}}),$=Object(k.a)(P,1)[0],A=Object(N.a)(G,{variables:{postId:n},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(){var e=Object(le.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,l(t.likePost.likes.length);case 3:return e.next=5,d(t.likePost.likes);case 5:y(t.likePost);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){console.log("Error",e)}}),B=Object(k.a)(A,1)[0],D=Object(N.a)(V,{variables:{postId:n},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(e){v.b.success("Post deleted successfully",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1}),t.push("/home")},onError:function(e){console.log("Error",e)}}),L=Object(k.a)(D,1)[0],_=Object(N.a)(z,{variables:{postId:n,commentID:g},context:{headers:{authorization:localStorage.getItem("token")}},onCompleted:function(){var e=Object(le.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t.deleteComment);case 2:v.b.success("Comment deleted successfully",{position:"top-center",autoClose:1500,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!1,draggable:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e){console.log("Error",e)}}),H=Object(k.a)(_,1)[0];return console.log(g),r.a.createElement("section",{className:"post-page"},S&&r.a.createElement(M,null),r.a.createElement("div",null,h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{style:{fontSize:"1.65rem"}},h.body),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"1rem"}},r.a.createElement("p",{style:{textAlign:"end"}},"Posted by ".concat(h.username)),r.a.createElement("p",null,"Liked by ".concat(s,0===s||s>1?" users.":" user.")))),r.a.createElement("div",{className:"actions"},e&&e.username===h.username&&r.a.createElement("span",{onClick:L},r.a.createElement("img",{src:me.a,alt:"Delete Post",className:"icon"})),r.a.createElement("span",{className:"like",onClick:B},m.some((function(t){return t.username===e.username}))?r.a.createElement("img",{src:ge.a,alt:"Like/Unlike Post",className:"icon"}):r.a.createElement("img",{src:pe.a,alt:"Like/Unlike Post",className:"icon"})))),r.a.createElement("div",{className:"textarea-container"},r.a.createElement("textarea",{className:"input",style:{marginBottom:"0"},rows:"4",placeholder:"Comment here.",value:x,onChange:function(e){I(e.target.value)}}),r.a.createElement("button",{className:"btn",onClick:$},"Comment")),h.comments&&h.comments.length>0&&h.comments.map((function(t){var n=t.body,a=t.id,o=t.username;return r.a.createElement("div",{className:"comment"},r.a.createElement("span",{style:{wordBreak:"break-all"}},n),e&&e.username===o&&r.a.createElement("span",{style:{alignSelf:"flex-end"},onClick:Object(le.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(a);case 2:H();case 3:case"end":return e.stop()}}),e)})))},r.a.createElement("img",{src:me.a,alt:"Delete comment",className:"icon"})))})))))},Oe=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Error 404: Page not found"),r.a.createElement("p",null,"This page isn't available. Try checking the URL or visit a different page."))},Ee=n(62),he=function(e){var t=e.component,n=void 0===t?null:t,a=e.render,o=void 0===a?null:a,c=Object(Ee.a)(e,["component","render"]);return r.a.createElement(j.b,Object.assign({},c,{render:function(e){return localStorage.getItem("token")?o?o(e):n?r.a.createElement(n,e):null:r.a.createElement(j.a,{to:"/login"})}}))},ve=n(63),je=n.n(ve),ye=function(){var e=Object(j.g)(),t=Object(m.c)((function(e){return e.app.user})),n=!!(Object.keys(t).length>0||localStorage.getItem("user")),a=Object(m.b)();return r.a.createElement("div",{className:"app-header"},r.a.createElement("h2",null,"Social Media"),n&&r.a.createElement("span",{style:{marginRight:"1rem"},onClick:Object(le.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({type:"LOGOUT"});case 2:e.push("/login");case 3:case"end":return t.stop()}}),t)})))},r.a.createElement("img",{src:je.a,alt:"logout",className:"icon"})))},ke=n(43),Ce=n.n(ke),we=function(){var e=Object(j.g)(),t=Object(j.h)(),n=Object(m.c)((function(e){return e.app.user})),a=!!(Object.keys(n).length>0||localStorage.getItem("user"));return r.a.createElement(r.a.Fragment,null,a?"/home/create_post"!==t.pathname?r.a.createElement("div",{className:"footer",onClick:function(){return e.push("/home/create_post")}},r.a.createElement("img",{src:Ce.a,style:{height:"2.4rem",width:"2.4rem"},alt:"New post",className:"icon"})):r.a.createElement("div",{className:"footer"},r.a.createElement("img",{src:Ce.a,style:{height:"2.4rem",width:"2.4rem"},alt:"New post",className:"icon"})):null)},Ne=function(){return r.a.createElement("div",{className:"app"},r.a.createElement(ye,null),r.a.createElement(oe,null),r.a.createElement("div",{className:"content"},r.a.createElement(j.d,null,r.a.createElement(j.b,{exact:!0,path:"/",component:y}),r.a.createElement(j.b,{exact:!0,path:"/login",component:Z}),r.a.createElement(j.b,{exact:!0,path:"/register",component:ie}),r.a.createElement(he,{exact:!0,path:"/home",component:K}),r.a.createElement(he,{exact:!0,path:"/home/create_post",component:X}),r.a.createElement(he,{exact:!0,path:"/home/:postId",component:fe}),r.a.createElement(Oe,null))),r.a.createElement(we,null),r.a.createElement(v.a,{style:{textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"}}))},xe=new l.a({addTypename:!1}),Ie=new s.a({uri:"/graphql",cache:xe});c.a.render(r.a.createElement(i.a,{client:Ie},r.a.createElement(u.a,null,r.a.createElement(m.a,{store:h},r.a.createElement(Ne,null)))),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.7885f985.chunk.js.map